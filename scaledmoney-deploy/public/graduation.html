<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Graduation ‚Äî Lean Dollar: Core | ScaledMoney|OS‚Ñ¢</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0a0f1e;
    --navy-mid: #111827;
    --navy-light: #1a2540;
    --gold: #c9a84c;
    --gold-light: #e8c96a;
    --gold-dim: #8a6f2e;
    --emerald: #2dd4a0;
    --emerald-dim: #1a7a5e;
    --white: #f5f3ef;
    --gray: #8892a4;
    --gray-light: #c5cad4;
    --card-bg: #141c2e;
    --card-border: rgba(201,168,76,0.15);
    --modal-bg: #0d1424;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--navy);
    color: var(--white);
    font-family: 'DM Sans', sans-serif;
    font-weight: 300;
    line-height: 1.6;
  }

  /* ===== ROW 1: Level Nav ===== */
  .level-nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    height: 60px;
    background: var(--navy);
    border-bottom: 1px solid var(--card-border);
    display: flex; align-items: center; justify-content: center;
    gap: 10px; padding: 0 24px;
    font-family: 'DM Sans', sans-serif; font-size: 12px; letter-spacing: 1px;
  }
  .level-nav .brand {
    position: absolute; left: 24px; top: 50%; transform: translateY(-50%);
    font-family: 'DM Mono', monospace; font-size: 13px; color: var(--gold);
    text-decoration: none; white-space: nowrap;
  }
  .level-nav .brand span { color: var(--gray); font-size: 11px; }
  .level-pill {
    padding: 8px 18px; border-radius: 20px; text-decoration: none;
    font-weight: 500; text-transform: uppercase; font-size: 11px; letter-spacing: 1.2px;
    transition: background 0.2s;
  }
  .level-pill.active { background: var(--gold); color: var(--navy); }
  .level-pill.locked {
    border: 1px solid var(--card-border); color: var(--gray);
  }
  .level-pill.locked::after { content: ' üîí'; font-size: 10px; }
  .level-pill.ee {
    border: 1px solid var(--emerald-dim); color: var(--emerald);
  }
  .login-pill {
    position: absolute; right: 24px; top: 50%; transform: translateY(-50%);
    padding: 8px 20px; border-radius: 20px;
    border: 1px solid var(--gold); color: var(--gold);
    text-decoration: none; font-size: 11px; font-weight: 600;
    letter-spacing: 1px; text-transform: uppercase;
    transition: background 0.2s, color 0.2s;
  }
  .login-pill:hover { background: var(--gold); color: var(--navy); }
  .version-tag {
    position: absolute; right: 140px; top: 50%; transform: translateY(-50%);
    font-size: 10px; color: var(--gray); font-family: 'DM Mono', monospace;
  }

  /* ===== ROW 2: Site Nav ===== */
  .site-nav {
    position: sticky; top: 60px; z-index: 99;
    background: var(--navy-mid);
    border-bottom: 1px solid var(--card-border);
    display: flex; align-items: center; justify-content: center;
    gap: 6px; padding: 10px 24px;
  }
  .site-pill {
    padding: 8px 22px; border-radius: 20px; text-decoration: none;
    font-size: 13px; font-weight: 500; color: var(--gray-light);
    transition: background 0.2s;
  }
  .site-pill:hover { background: rgba(201,168,76,0.1); color: var(--white); }
  .site-pill.active { background: var(--gold); color: var(--navy); font-weight: 600; }
  .tools-dropdown { position: relative; }
  .tools-toggle {
    padding: 8px 22px; border-radius: 20px;
    font-size: 13px; font-weight: 500; color: var(--gray-light);
    background: none; border: none; cursor: pointer;
    font-family: inherit; transition: background 0.2s;
  }
  .tools-toggle:hover { background: rgba(201,168,76,0.1); color: var(--white); }
  .tools-toggle.active { background: var(--gold); color: var(--navy); font-weight: 600; }
  .tools-menu {
    display: none; position: absolute; top: 100%; left: 0;
    background: var(--navy-light); border: 1px solid var(--card-border);
    border-radius: 12px; padding: 8px 0; min-width: 220px;
    z-index: 200; margin-top: 6px;
  }
  .tools-menu.open { display: block; }
  .tools-menu a {
    display: block; padding: 10px 20px; color: var(--gray-light);
    text-decoration: none; font-size: 13px; transition: background 0.15s;
  }
  .tools-menu a:hover { background: rgba(201,168,76,0.08); color: var(--white); }

  /* ===== Main Content ===== */
  main {
    max-width: 800px;
    margin: 0 auto;
    padding: 120px 24px 80px;
    text-align: center;
  }

  .grad-badge {
    display: inline-block;
    padding: 6px 18px;
    border: 1px solid var(--gold-dim);
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 24px;
  }

  .grad-title {
    font-family: 'Playfair Display', serif;
    font-size: 48px;
    font-weight: 700;
    line-height: 1.15;
    margin-bottom: 16px;
    color: var(--white);
  }
  .grad-title em {
    color: var(--gold);
    font-style: normal;
  }

  .grad-subtitle {
    font-size: 18px;
    color: var(--gray);
    max-width: 560px;
    margin: 0 auto 48px;
    line-height: 1.7;
  }

  /* Sprint tracker */
  .sprint-tracker {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 40px;
    margin-bottom: 48px;
  }

  .tracker-label {
    font-size: 11px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--gray);
    margin-bottom: 24px;
    font-weight: 600;
  }

  .sprint-dots {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 24px;
  }

  .sprint-dot {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 18px;
    transition: all 0.3s;
  }
  .sprint-dot.incomplete {
    border: 2px dashed var(--card-border);
    color: var(--gray);
  }
  .sprint-dot.complete {
    background: rgba(45,212,160,0.15);
    border: 2px solid var(--emerald);
    color: var(--emerald);
  }
  .sprint-dot.complete::after {
    content: '‚úì';
    font-size: 24px;
  }
  .sprint-dot.incomplete::after {
    content: attr(data-num);
  }

  .tracker-count {
    font-size: 14px;
    color: var(--gray-light);
  }
  .tracker-count strong {
    color: var(--gold);
  }

  /* Status message */
  .status-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 36px;
    margin-bottom: 48px;
  }

  .status-icon {
    font-size: 48px;
    margin-bottom: 16px;
  }

  .status-heading {
    font-family: 'Playfair Display', serif;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .status-desc {
    font-size: 15px;
    color: var(--gray);
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.7;
  }

  /* CTA Button */
  .flow-cta {
    display: inline-block;
    padding: 16px 40px;
    background: var(--gold);
    color: var(--navy);
    font-weight: 700;
    font-size: 15px;
    letter-spacing: 0.5px;
    border-radius: 40px;
    text-decoration: none;
    transition: background 0.2s, transform 0.2s;
    opacity: 0.4;
    pointer-events: none;
    cursor: not-allowed;
  }
  .flow-cta.unlocked {
    opacity: 1;
    pointer-events: auto;
    cursor: pointer;
  }
  .flow-cta.unlocked:hover {
    background: #e2c060;
    transform: translateY(-1px);
  }

  .flow-cta-hint {
    font-size: 12px;
    color: var(--gray);
    margin-top: 12px;
  }

  /* Back link */
  .back-link {
    display: inline-block;
    margin-top: 36px;
    color: var(--gray);
    text-decoration: none;
    font-size: 13px;
    transition: color 0.2s;
  }
  .back-link:hover { color: var(--gold); }

  /* == Coach Card == */
  .coach-card-wrap{max-width:680px;margin:24px auto 32px;padding:0 24px}
  .coach-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;overflow:hidden;transition:all .3s ease}
  .coach-card.collapsed{border-radius:40px;cursor:pointer}
  .coach-card.collapsed .coach-expanded{display:none}
  .coach-card.collapsed .coach-collapsed{display:flex}
  .coach-collapsed{display:none;align-items:center;gap:12px;padding:12px 20px}
  .coach-collapsed .coach-icon{width:32px;height:32px;background:var(--gold);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
  .coach-collapsed .coach-pill-title{font-size:13px;font-weight:600;color:var(--white);flex:1}
  .coach-collapsed .coach-expand-btn{background:none;border:none;cursor:pointer;color:var(--gold);font-size:18px;padding:4px 8px}
  .coach-expanded{padding:0}
  .coach-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 12px}
  .coach-badge{display:flex;align-items:center;gap:8px;font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--gold)}
  .coach-badge-dot{width:8px;height:8px;background:var(--gold);border-radius:50%;animation:coachPulse 2s ease-in-out infinite}
  @keyframes coachPulse{0%,100%{opacity:1}50%{opacity:.4}}
  .coach-close{background:none;border:none;cursor:pointer;color:var(--gray);font-size:20px;padding:4px 8px;transition:color .2s}
  .coach-close:hover{color:var(--white)}
  .coach-body{padding:0 20px 20px}
  .coach-title{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:var(--white);margin-bottom:6px}
  .coach-desc{font-size:14px;color:var(--gray);line-height:1.6;margin-bottom:16px}
  .coach-video-box{position:relative;background:var(--navy-mid);border:1px solid var(--card-border);border-radius:12px;overflow:hidden;cursor:pointer;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center;transition:border-color .2s}
  .coach-video-box:hover{border-color:var(--gold)}
  .coach-video-box:hover .coach-play-ring{transform:scale(1.1)}
  .coach-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;text-align:center}
  .coach-play-ring{width:64px;height:64px;border:2px solid var(--gold);border-radius:50%;display:flex;align-items:center;justify-content:center;transition:transform .2s}
  .coach-play-arrow{width:0;height:0;border-top:12px solid transparent;border-bottom:12px solid transparent;border-left:20px solid var(--gold);margin-left:4px}
  .coach-placeholder-text{font-size:13px;color:var(--gray);letter-spacing:.5px}
  .coach-lightbox{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.85);z-index:9999;align-items:center;justify-content:center;padding:24px}
  .coach-lightbox.active{display:flex}
  .coach-lightbox-inner{width:100%;max-width:900px;aspect-ratio:16/9;background:var(--navy-mid);border-radius:12px;overflow:hidden;position:relative}
  .coach-lightbox-inner iframe{width:100%;height:100%;border:none}
  .coach-lightbox-close{position:absolute;top:-40px;right:0;background:none;border:none;color:var(--white);font-size:28px;cursor:pointer;padding:4px 8px}
  .coach-lb-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px;color:var(--gray)}
  .coach-lb-placeholder .coach-play-ring{width:80px;height:80px}
  .coach-lb-placeholder .coach-play-arrow{border-top:16px solid transparent;border-bottom:16px solid transparent;border-left:26px solid var(--gold);margin-left:5px}

  </style>
</head>
<body>

<!-- ROW 1: Level Nav -->
<nav class="level-nav">
  <a href="/framework" class="brand">ScaledMoney|OS‚Ñ¢ <span>¬∑ Lean Dollar</span></a>
  <a href="/framework" class="level-pill active">Lean Dollar: Core</a>
  <a href="#" class="level-pill locked">Lean Dollar: Flow</a>
  <a href="#" class="level-pill locked">Lean Dollar: Vault</a>
  <a href="#" class="level-pill ee">Evaluate + Evolve Engine Active</a>
  <span class="version-tag">v1.0</span>
  <a href="/login" class="login-pill">Login / Join</a>
</nav>

<!-- ROW 2: Site Nav -->
<nav class="site-nav">
  <a href="/framework" class="site-pill">Framework</a>
  <a href="/dashboard" class="site-pill">Dashboard</a>
  <div class="tools-dropdown">
    <button class="tools-toggle" onclick="this.nextElementSibling.classList.toggle('open')">Tools ‚ñæ</button>
    <div class="tools-menu">
      <a href="/tools/gap-audit">Gap Audit</a>
      <a href="/tools/true-cost">True Cost Engine</a>
      <a href="/tools/sprint-planner">Sprint Budget Planner</a>
      <a href="/tools/dollar-standup">Dollar Standup</a>
      <a href="/tools/retro">Retro</a>
    </div>
  </div>
</nav>

<main>
  <div class="grad-badge">Level Advancement</div>

  <h1 class="grad-title">Graduate to <em>Flow</em></h1>

  <p class="grad-subtitle">
    Complete 4 full sprints at Lean Dollar: Core to unlock the next tier.
    Consistency is the proof. The Core must hold before you build.
  </p>

  <!-- COACH CARD: Graduation Guide -->
  <div class="coach-card-wrap" id="coach-graduation">
    <div class="coach-card" id="coach-card-graduation">
      <div class="coach-collapsed">
        <div class="coach-icon">&#9654;</div>
        <span class="coach-pill-title">Watch: What Flow Unlocks</span>
        <button class="coach-expand-btn" aria-label="Expand guide">&#9660;</button>
      </div>
      <div class="coach-expanded">
        <div class="coach-header">
          <div class="coach-badge"><span class="coach-badge-dot"></span>VIDEO GUIDE</div>
          <button class="coach-close" aria-label="Collapse guide">&times;</button>
        </div>
        <div class="coach-body">
          <div class="coach-title">What Flow Unlocks</div>
          <p class="coach-desc">After 4 completed sprints, you graduate to Lean Dollar: Flow. Learn what new tools, features, and capabilities unlock at the next tier ‚Äî and why consistency at Core is the foundation.</p>
          <div class="coach-video-box" data-video-id="" data-video-provider="" onclick="openCoachLightbox('graduation')">
            <div class="coach-placeholder">
              <div class="coach-play-ring"><div class="coach-play-arrow"></div></div>
              <span class="coach-placeholder-text">Video coming soon</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="coach-lightbox" id="coach-lightbox">
    <div class="coach-lightbox-inner">
      <button class="coach-lightbox-close" onclick="closeCoachLightbox()">&times;</button>
      <div id="coach-lightbox-content">
        <div class="coach-lb-placeholder">
          <div class="coach-play-ring"><div class="coach-play-arrow"></div></div>
          <span style="font-size:16px;color:var(--white)">Video coming soon</span>
          <span style="font-size:13px">YouTube or Wistia embed will appear here</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Sprint Tracker -->
  <div class="sprint-tracker">
    <div class="tracker-label">Sprint Completion Progress</div>
    <div class="sprint-dots">
      <div class="sprint-dot incomplete" data-num="1"></div>
      <div class="sprint-dot incomplete" data-num="2"></div>
      <div class="sprint-dot incomplete" data-num="3"></div>
      <div class="sprint-dot incomplete" data-num="4"></div>
    </div>
    <div class="tracker-count"><strong>0</strong> of 4 sprints completed</div>
  </div>

  <!-- Status Card -->
  <div class="status-card">
    <div class="status-icon">üîí</div>
    <h2 class="status-heading">Flow Is Locked</h2>
    <p class="status-desc">
      Complete all 4 sprints to unlock Lean Dollar: Flow.
      Each sprint must be fully closed‚Ää‚Äî‚ÄäGap funded, obligations current, 
      Standup run, and Retro documented.
    </p>
  </div>

  <!-- CTA (disabled until 4 sprints complete) -->
  <a href="#" class="flow-cta">Advance to Lean Dollar: Flow ‚Üí</a>
  <div class="flow-cta-hint">Complete 4 sprints to activate</div>

  <a href="/framework" class="back-link">‚Üê Back to Framework</a>
</main>

<script>
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.tools-dropdown')) {
      document.querySelectorAll('.tools-menu').forEach(function(m) { m.classList.remove('open'); });
    }
  });

  function updateGraduationStatus(completedSprints) {
    var dots = document.querySelectorAll('.sprint-dot');
    var countEl = document.querySelector('.tracker-count');
    var statusIcon = document.querySelector('.status-icon');
    var statusHeading = document.querySelector('.status-heading');
    var statusDesc = document.querySelector('.status-desc');
    var cta = document.querySelector('.flow-cta');
    var hint = document.querySelector('.flow-cta-hint');
    var count = Math.min(completedSprints, 4);

    dots.forEach(function(dot, i) {
      if (i < count) {
        dot.classList.remove('incomplete');
        dot.classList.add('complete');
      } else {
        dot.classList.remove('complete');
        dot.classList.add('incomplete');
      }
    });

    if (countEl) countEl.innerHTML = '<strong>' + count + '</strong> of 4 sprints completed';

    if (count >= 4) {
      if (statusIcon) statusIcon.textContent = '\ud83c\udf93';
      if (statusHeading) statusHeading.textContent = 'Ready to Graduate!';
      if (statusDesc) statusDesc.textContent = 'You have completed 4 full sprints at Lean Dollar: Core. You are ready to advance to Flow.';
      if (cta) cta.classList.add('unlocked');
      if (hint) hint.textContent = 'Click to begin your Flow journey';
    } else {
      if (statusIcon) statusIcon.textContent = '\ud83d\udd12';
      if (statusHeading) statusHeading.textContent = 'Flow Is Locked';
      if (statusDesc) statusDesc.textContent = 'Complete all 4 sprints to unlock Lean Dollar: Flow. Each sprint must be fully closed \u2014 Gap funded, obligations current, Standup run, and Retro documented.';
      if (cta) cta.classList.remove('unlocked');
      if (hint) hint.textContent = 'Complete 4 sprints to activate';
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    var sprints = [];
    try { sprints = JSON.parse(localStorage.getItem('scaledmoney-sprints') || '[]'); } catch(e) { sprints = []; }
    updateGraduationStatus(sprints.length);
  });
</script>

<script>
(function(){
  var SK='scaledmoney-coach';
  function g(){try{return JSON.parse(localStorage.getItem(SK))||{}}catch(e){return{}}}
  function s(k,v){var o=g();o[k]=v;localStorage.setItem(SK,JSON.stringify(o))}
  function init(id){var c=document.getElementById('coach-card-'+id);if(!c)return;var cl=c.querySelector('.coach-close'),ex=c.querySelector('.coach-expand-btn'),co=c.querySelector('.coach-collapsed');if(g()[id+'_collapsed'])c.classList.add('collapsed');if(cl)cl.addEventListener('click',function(){c.classList.add('collapsed');s(id+'_collapsed',true)});if(ex)ex.addEventListener('click',function(){c.classList.remove('collapsed')});if(co)co.addEventListener('click',function(e){if(e.target===ex||ex.contains(e.target))return;c.classList.remove('collapsed')});}
  window.openCoachLightbox=function(id){var lb=document.getElementById('coach-lightbox'),ct=document.getElementById('coach-lightbox-content'),bx=document.querySelector('#coach-card-'+id+' .coach-video-box');if(!lb||!bx)return;var vid=bx.getAttribute('data-video-id'),pr=bx.getAttribute('data-video-provider');if(vid&&pr==='youtube')ct.innerHTML='<iframe src="https://www.youtube.com/embed/'+vid+'?autoplay=1&rel=0" allow="autoplay;encrypted-media" allowfullscreen></iframe>';else if(vid&&pr==='wistia')ct.innerHTML='<iframe src="https://fast.wistia.net/embed/iframe/'+vid+'?autoPlay=true" allow="autoplay;fullscreen" allowfullscreen></iframe>';lb.classList.add('active');s(id+'_watched',true);};
  window.closeCoachLightbox=function(){var lb=document.getElementById('coach-lightbox'),ct=document.getElementById('coach-lightbox-content');if(lb)lb.classList.remove('active');if(ct){var f=ct.querySelector('iframe');if(f)f.src='';}};
  document.addEventListener('keydown',function(e){if(e.key==='Escape')closeCoachLightbox()});
  var lb=document.getElementById('coach-lightbox');if(lb)lb.addEventListener('click',function(e){if(e.target===this)closeCoachLightbox()});
  init('graduation');
})();
</script>
</body>
</html>
